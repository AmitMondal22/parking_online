<div class="container-fluid">
  <div class="row">
    <div class="card col-12">
      <div class="card-body">
        <div class="titleSec">
          <button type="button" class="btn btn-primary" id="myBtn"
            style="float: inline-end;border-radius: 6px;width: 6vw;">Add</button>
        </div>
        <div class="row mt-4">
          <h4 class="text-dark"><i data-feather="command" class="feather-icon"></i>&nbsp;<b>Header &
              Footer</b></h4>
        </div>
        <div class="table-responsive mt-3">
          <table id="example" class="table table-striped table-bordered show_data" style="width:100%">
            <thead>
              <tr>
                <th class="text-dark">Sl. No.</th>
                <th class="text-dark">Cust Name</th>
                <th class="text-dark">Action</th>
              </tr>
            </thead>
            <tbody>
              <% data.msg.forEach(function(item,index) { %>
                <tr>
                  <td>
                    <%=(index+1)%>
                  </td>
                  <td>
                    <%=item.customer_name %>
                  </td>
                  <td>
                    <a href="/header/edit_header_footer_details?customer_id=<%=item.customer_id%>" class="btn btn-info"
                      style="border-radius: 5px;"><i class="fa fa-edit"></i></a>
                  </td>
                </tr>
                <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css"
  rel="stylesheet">
<script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>

<div class="modal fade" id="myModal">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h3 class="modal-title text-dark"><b>Add Header & Footer</b></h3>
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <form action="/header/add_header_footer" method="post" id="myForm">
          <div class="row">
            <div class="form-group col-9">
              <label for="cust_id" class="text-dark"><b>Customer Name:</b></label>
              <select name="cust_id" class="form-control" id="cust_id">
                <option value="" selected>
                  <%= user.user_data.customer_name %>
                </option>
              </select>
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="header_1" class="text-dark"><b>Header 1</b>&nbsp;&nbsp;<span id="charCount1"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="header_1" name="header_1" rows="2" placeholder="Enter Header1...."
                  maxlength="25" oninput="updateCharCount('header_1','charCount1')"></textarea>
              </div>
            </div>
            <div class="col-md-3 cust-toggle1">
              <label for="header_1_flag" class="text-dark"><b>Header 1 Flag</b></label><br>
              <input type="checkbox" value=1 id="header_1_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="header_1_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="header_2" class="text-dark"><b>Header 2</b>&nbsp;&nbsp;<span id="charCount2"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="header_2" name="header_2" rows="2" placeholder="Enter Header2...."
                  maxlength="25" oninput="updateCharCount('header_2','charCount2')"></textarea>
              </div>
            </div>
            <div class="col-md-3 cust-toggle1">
              <label for="header_2_flag" class="text-dark"><b>Header 2 Flag</b></label><br>
              <input type="checkbox" value=1 id="header_2_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="header_2_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="header_3" class="text-dark"><b>Header 3</b>&nbsp;&nbsp;<span id="charCount3"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="header_3" name="header_3" rows="2" placeholder="Enter Header3...."
                  maxlength="25" oninput="updateCharCount('header_3','charCount3')"></textarea>
              </div>
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="header_3_flag" class="text-dark"><b>Header 3 Flag</b></label><br>
              <input type="checkbox" value=1 id="header_3_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="header_3_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="header_4" class="text-dark"><b>Header 4</b>&nbsp;&nbsp;<span id="charCount4"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="header_4" name="header_4" rows="2" placeholder="Enter Header4...."
                  maxlength="25" oninput="updateCharCount('header_4','charCount4')"></textarea>
              </div>
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="header_4_flag" class="text-dark"><b>Header 4 Flag</b></label><br>
              <input type="checkbox" value=1 id="header_4_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="header_4_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="footer_1" class="text-dark"><b>Footer 1</b>&nbsp;&nbsp;<span id="charCount5"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="footer_1" name="footer_1" rows="2" placeholder="Enter Footer1...."
                  maxlength="25" oninput="updateCharCount('footer_1','charCount5')"></textarea>
              </div>
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="footer_1_flag" class="text-dark"><b>Footer 1 Flag</b></label><br>
              <input type="checkbox" value=1 id="footer_1_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="footer_1_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="footer_2" class="text-dark"><b>Footer 2</b>&nbsp;&nbsp;<span id="charCount6"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="footer_2" name="footer_2" rows="2" placeholder="Enter Footer2...."
                  maxlength="25" oninput="updateCharCount('footer_2','charCount6')"></textarea>
              </div>
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="footer_2_flag" class="text-dark"><b>Footer 2 Flag</b></label><br>
              <input type="checkbox" value=1 id="footer_2_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="footer_2_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="footer_3" class="text-dark"><b>Footer 3</b>&nbsp;&nbsp;<span id="charCount7"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="footer_3" name="footer_3" rows="2" placeholder="Enter Footer3...."
                  maxlength="25" oninput="updateCharCount('footer_3','charCount7')"></textarea>
              </div>
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="footer_3_flag" class="text-dark"><b>Footer 3 Flag</b></label><br>
              <input type="checkbox" value=1 id="footer_3_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="footer_3_flag">
            </div>

            <div class="col-md-9">
              <div class="form-group">
                <label for="footer_4" class="text-dark"><b>Footer 4</b>&nbsp;&nbsp;<span id="charCount8"
                    class="char-count"><b>(0/25)</b></span></label>
                <textarea class="form-control" id="footer_4" name="footer_4" rows="2" placeholder="Enter Footer4...."
                  maxlength="25" oninput="updateCharCount('footer_4','charCount8')"></textarea>
              </div>
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="footer_4_flag" class="text-dark"><b>Footer 4 Flag</b></label><br>
              <input type="checkbox" value=1 id="footer_4_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="footer_4_flag">
            </div>

            <div class="col-md-3 cust-toggle1" style="margin-left: 15vw;">
              <label for="in_on_off_flag" class="text-dark"><b>IN Receipt</b></label><br>
              <input type="checkbox" value="Y" id="in_on_off_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="in_on_off_flag">
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="out_on_off_flag" class="text-dark"><b>OUT Receipt</b></label><br>
              <input type="checkbox" value=1 id="out_on_off_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="out_on_off_flag">
            </div>

            <div class="col-md-3 cust-toggle1">
              <label for="report_flag" class="text-dark"><b>Report</b></label><br>
              <input type="checkbox" value="Y" id="report_flag" data-toggle="toggle" data-onstyle="success"
                data-offstyle="danger" data-on="Active" data-off="Deactive" name="report_flag">
            </div>

          </div>
          <div class="row mt-5">
            <div class="form-group col-md-3">
              <input type="submit" value="SUBMIT" class="btn btn-primary btn-block" style="margin-left: 32vw;" />
            </div>
          </div>
        </form>
      </div>

      <!-- Modal footer -->
      <!-- <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">
            Close
          </button>
        </div> -->
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    var customer_id = $(this).val()
    $.ajax({
      type: "GET",
      url: "/header/header_footer_details",
      data: { customer_id: customer_id },
      success: function (response) {
        if (response.suc > 0 && response.msg.length > 0) {
          $('#myBtn').hide()
        }
      },
      error: function (error) {
        console.log(error);
        tbody.empty();
      }
    });
  });

</script>

<script>
  $(document).ready(function () {
    $("#myBtn").click(function () {
      $("#myModal").modal();
      // $("#myBtn").hide()
    });
  });
</script>

<script>
  function updateCharCount(textareaId, countId) {
    var textarea = document.getElementById(textareaId);
    var charCount = document.getElementById(countId);

    if (textarea && charCount) {
      var count = textarea.value.length;
      charCount.innerHTML = '<span style="font-weight: bold;">(' + count + '/25)</span>';
    }
  }
</script>